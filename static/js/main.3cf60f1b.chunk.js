(this["webpackJsonplfq-app"]=this["webpackJsonplfq-app"]||[]).push([[0],{1293:function(t,e){},1791:function(t,e,n){},1792:function(t,e,n){},1812:function(t,e){},1827:function(t,e,n){},2070:function(t,e,n){},2071:function(t,e,n){},2077:function(t,e,n){"use strict";n.r(e);var a=n(7),i=n(0),r=n.n(i),c=n(23),s=n.n(c),o=(n(985),n(986),n(987),n(66));var u=n(395),l=Object(u.b)(new function(){return new Worker(n.p+"static/js/worker.ab02fb89.worker.js")}),p="SET_INPUT_SAMPLES",d="SET_INPUT_CONDITIONS",O="SET_INPUT_COMPARISONS",b="SET_VIEW_FIGURE_OPTIONS";function j(t,e){return{type:t,data:e}}var f=n(957),h=n.n(f);var m=Object(o.b)(null,(function(t){return{onDataUpload:function(e){t(function(t){return function(e){new Response(t).arrayBuffer().then((function(t){return l.onDataUpload(Object(u.a)(t,[t]))})).then((function(){return l.getSamples()})).then((function(t){e(j(p,t))}))}}(e))}}}))((function(t){var e=t.onDataUpload;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("label",{htmlFor:"dataUpload",children:["(1) Upload data to begin analysis:"," "]}),Object(a.jsx)("input",{type:"file",id:"dataUpload",name:"dataUpload",onInput:function(t){return e(t.target.files[0])}}),Object(a.jsx)("ul",{children:Object(a.jsx)("li",{children:"View log-transformed intensity distributions per sample as violin plot or boxplot."})})]})})),g=n(43),x=n(24),v=n(152),N=n.n(v);n(1791);N.a.setAppElement("#root");var S=Object(o.b)((function(t){return{samples:t.input.samples}}),(function(t){return{onReplicatesSelect:function(e){t(function(t){return function(e){l.onReplicatesSelect(t).then((function(){e(j(d,Object.keys(t)))}))}}(e))}}}))((function(t){var e=t.samples,n=t.onReplicatesSelect,i=r.a.useState(!1),c=Object(x.a)(i,2),s=c[0],o=c[1],u=r.a.useState([]),l=Object(x.a)(u,2),p=l[0],d=l[1],O=r.a.useState(""),b=Object(x.a)(O,2),j=b[0],f=b[1],h=r.a.useState({}),m=Object(x.a)(h,2),v=m[0],S=m[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"(2) "}),Object(a.jsx)("button",{onClick:function(){return o(!0)},children:"Select replicates"}),Object(a.jsx)("ul",{children:Object(a.jsx)("li",{children:"View log-transformed intensity distributions per condition as violin plot or boxplot."})}),Object(a.jsxs)(N.a,{isOpen:s,id:"input-replicate-modal",style:{overlay:{zIndex:1e3}},children:[Object(a.jsx)("h1",{id:"input-replicate-modal-head",children:"Select replicates"}),Object(a.jsxs)("div",{id:"input-replicate-modal-left",children:[Object(a.jsx)("p",{children:"Samples present in data:"}),Object(a.jsx)("select",{multiple:!0,onChange:function(t){d(Array.from(t.target.selectedOptions).map((function(t){return t.value})))},children:e.map((function(t){return Object(a.jsx)("option",{value:t,children:t},t)}))})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"New condition wtih selected samples as replicates:"}),Object(a.jsx)("label",{htmlFor:"conditionName",children:"Condition name: "}),Object(a.jsx)("input",{type:"text",id:"conditionName",name:"conditionName",value:j,onChange:function(t){return f(t.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:function(){0!==j.length&&(S(Object.assign({},v,Object(g.a)({},j,p))),f(""))},children:"Add condition"}),Object(a.jsx)("br",{}),Object(a.jsx)("hr",{style:{margin:"2rem"}}),Object(a.jsx)("button",{onClick:function(){return S({})},children:"Reset conditions"})]}),Object(a.jsxs)("div",{id:"input-replicate-modal-right",children:[Object(a.jsx)("p",{children:"Conditions and replicates:"}),Object(a.jsx)("div",{children:Object.entries(v).map((function(t){var e=Object(x.a)(t,2),n=e[0],i=e[1];return Object(a.jsxs)("p",{children:[n,": ",i.join(", ")]},n)}))})]}),Object(a.jsx)("div",{id:"input-replicate-modal-foot",children:Object(a.jsx)("button",{onClick:function(){n(v),o(!1)},children:"OK"})})]})]})})),y=(n(1792),n(191)),M=n(87),T=n(44),I=n(960),_=n(961),A=n(153),w=n(98),E=n.n(w);function k(t,e){var n=E()(t).mean(),a=E()(e).mean(),i=E()(t).stdev(!0),r=E()(e).stdev(!0),c=Math.sqrt(Math.pow(i,2)/t.length+Math.pow(r,2)/e.length),s=Math.floor(Math.pow(Math.pow(i,2)/t.length+Math.pow(r,2)/e.length,2)/(Math.pow(i,4)/(Math.pow(t.length,2)*(t.length-1))+Math.pow(r,4)/(Math.pow(e.length,2)*(e.length-1)))),o=(a-n)/c;return{t:o,p:2*E.a.studentt.cdf(-Math.abs(o),s),df:s}}function L(t){for(var e=t.map((function(t,e){return{index:e,p:t}})).sort((function(t,e){return t.p-e.p})),n=e.length-1;n>=0;n--)e[n].padj=Math.min(1,Math.min(e.length*e[n].p/(n+1),n<e.length-1?e[n+1].padj:1));return e.sort((function(t,e){return t.index-e.index})).map((function(t){return t.padj}))}var P=n(561),C=n.n(P),D=n(199);function F(t,e){return new A.a({columns:Object(M.a)(Object(M.a)({},Q.COMMON_COLUMNS.reduce((function(e,n){return Object.assign(e,Object(g.a)({},n,t.getSeries(n)))}),{})),e.reduce((function(e,n){var a=t.getSeries("LFQ intensity ".concat(n)).where((function(t){return!Number.isNaN(t)})).bake(),i=a.average(),r=a.std();return e["LFQ intensity ".concat(n)]=t.getSeries("LFQ intensity ".concat(n)).select((function(t){return Number.isNaN(t)?C.a.uniform(i-3*r,i-2*r)():t})),e}),{})),index:t.getIndex()}).bake()}function U(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a=new Map,i=function(e,n){if(a.has(Object(D.a)(e,n)))return a.get(Object(D.a)(e,n));var i=t.getSeries("LFQ intensity ".concat(e)).toArray(),r=t.getSeries("LFQ intensity ".concat(n)).toArray(),c=Object(T.a)(Array(i.length).keys()).map((function(t){return!isNaN(i[t])&&!isNaN(r[t])})),s=E.a.corrcoeff(i.filter((function(t,e){return c[e]})),r.filter((function(t,e){return c[e]})));return s=Math.max(isNaN(s)?0:s,.1),a.set(Object(D.a)(e,n),s),s},r=new Map,c=function(e,n){if(r.has(Object(D.a)(e,n)))return r.get(Object(D.a)(e,n));var a=t.getSeries("LFQ intensity ".concat(e)).toArray(),i=t.getSeries("LFQ intensity ".concat(n)).toArray(),c=E()(Object(T.a)(Array(a.length).keys()).filter((function(t){return!isNaN(a[t])&&!isNaN(i[t])})).map((function(t){return(a[t]-i[t])/((a[t]+i[t])/2)}))),s={mean:c.mean(),std:c.stdev()};return r.set(Object(D.a)(e,n),s),s},s=e.sort((function(e,n){return t.getSeries("LFQ intensity ".concat(e)).select((function(t){return isNaN(t)?1:0})).sum()-t.getSeries("LFQ intensity ".concat(n)).select((function(t){return isNaN(t)?1:0})).sum()})),o=t.select((function(t){var a;if(Object.values(t).map((function(t){return isNaN(t)?0:1})).reduce((function(t,e){return t+e}))<n)return t;var r,o=Object(y.a)(s);try{for(o.s();!(r=o.n()).done;){var u=r.value;if(!isNaN(t["LFQ intensity ".concat(u)])){a=u;break}}}catch(p){o.e(p)}finally{o.f()}var l=E()(e.filter((function(e){return e!==a&&isNaN(t["LFQ intensity ".concat(e)])})).map((function(t){return i(t,a)}))).mean();return e.reduce((function(e,n){var i=t["LFQ intensity ".concat(n)];if(isNaN(i)){var r=c(n,a),s=r.mean,o=r.std,u=C.a.normal(s,o/(Math.sqrt(2)*l))();e["LFQ intensity ".concat(n)]=t["LFQ intensity ".concat(a)]*Math.abs(1+u)}else e["LFQ intensity ".concat(n)]=i;return e}),{})})).bake(),u=F(t,e).subset(e.map((function(t){return"LFQ intensity ".concat(t)})));return o.zip(u,(function(t,e){return Object.values(t).every((function(t){return!isNaN(t)}))?t:e})).bake()}function R(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,a={};return e.forEach((function(e,i,r){var c,s=U(t.subset(e.map((function(t){return"LFQ intensity ".concat(t)}))),e,n),o=Object(y.a)(s.getColumns());try{for(o.s();!(c=o.n()).done;){var u=c.value;a[u.name]=u.series}}catch(l){o.e(l)}finally{o.f()}})),new A.a({columns:Object(M.a)(Object(M.a)({},Q.COMMON_COLUMNS.reduce((function(e,n){return Object.assign(e,Object(g.a)({},n,t.getSeries(n)))}),{})),a),index:t.getIndex()}).bake()}var H=function(){function t(e,n){Object(I.a)(this,t),this.data=e,this.rawData=e,this.samples=n,this.snapshots=new Map,this.replicates=new Map,this.comparisons=new Map,this.removeContaminants=this.removeContaminants.bind(this),this.logTransform=this.logTransform.bind(this),this.removeAllNaN=this.removeAllNaN.bind(this),this.setReplicates=this.setReplicates.bind(this)}return Object(_.a)(t,[{key:"resetToSnapshot",value:function(t){this.snapshots.has(t)&&(this.data=this.snapshots.get(t))}},{key:"removeContaminants",value:function(){console.log("removing contaminants"),this.data=this.data.where((function(t){return!t["Potential contaminant"]&&!t.Reverse})).subset([].concat(Object(T.a)(t.COMMON_COLUMNS),Object(T.a)(this.samples.map((function(t){return"LFQ intensity ".concat(t)}))))).bake(),this.snapshots.set(t.SNAPSHOT_KEYS.REMOVE_CONTAMINANTS,this.data)}},{key:"logTransform",value:function(){var e=this;console.log("log transforming"),this.data=new A.a({columns:Object(M.a)(Object(M.a)({},t.COMMON_COLUMNS.reduce((function(t,n){return Object.assign(t,Object(g.a)({},n,e.data.getSeries(n)))}),{})),this.samples.reduce((function(t,n){return Object.assign(t,Object(g.a)({},"LFQ intensity ".concat(n),e.data.getSeries("LFQ intensity ".concat(n)).select((function(t){return t>0?Math.log2(t):NaN}))))}),{})),index:this.data.getIndex()}).bake()}},{key:"removeAllNaN",value:function(){var e=this;console.log("removing all NaN"),this.data=this.data.where((function(t){return!e.samples.every((function(e){return isNaN(t["LFQ intensity ".concat(e)])}))})).bake(),this.snapshots.set(t.SNAPSHOT_KEYS.LOG_TRANSFORM,this.data)}},{key:"normalizeMedians",value:function(e){var n=this;if(console.log("normalizing medians"),e){var a=new Map;this.samples.map((function(t){return a.set(t,n.data.getSeries("LFQ intensity ".concat(t)).where((function(t){return!Number.isNaN(t)})).median())}));var i=Math.max.apply(null,Array.from(a.values()));this.data=new A.a({columns:Object(M.a)(Object(M.a)({},t.COMMON_COLUMNS.reduce((function(t,e){return Object.assign(t,Object(g.a)({},e,n.data.getSeries(e)))}),{})),this.samples.reduce((function(t,e){return Object.assign(t,Object(g.a)({},"LFQ intensity ".concat(e),n.data.getSeries("LFQ intensity ".concat(e)).select((function(t){return t*i/a.get(e)}))))}),{})),index:this.data.getIndex()}).bake(),this.snapshots.set(t.SNAPSHOT_KEYS.MEDIAN_NORMALIZATION,this.data)}else this.snapshots.set(t.SNAPSHOT_KEYS.MEDIAN_NORMALIZATION,this.data)}},{key:"setReplicates",value:function(t){this.replicates.clear();for(var e=0,n=Object.entries(t);e<n.length;e++){var a=Object(x.a)(n[e],2),i=a[0],r=a[1];this.replicates.set(i,r)}}},{key:"imputeMissingValues",value:function(e){switch(console.log("imputing missing values"),e){case t.IMPUTATION_METHODS.METHOD_31:this.data=F(this.data,this.samples);break;case t.IMPUTATION_METHODS.METHOD_46:this.data=R(this.data,this.replicates);break;case t.IMPUTATION_METHODS.METHOD_47:this.data=R(this.data,this.replicates,1)}this.snapshots.set(t.SNAPSHOT_KEYS.IMPUTE_MISSING_VALUES,this.data)}},{key:"makeComparisons",value:function(e){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.thresholdP,r=void 0===i?.05:i,c=a.thresholdLogFC,s=void 0===c?1:c,o=a.thresholdReps,u=void 0===o?2:o;console.log("making comparisons");for(var l=function(){var e=Object(x.a)(d[p],2),a=e[0],i=e[1];n.comparisons.has(a)||n.comparisons.set(a,new Map);var c,o=Object(y.a)(i);try{var l=function(){var e=c.value,i=n.rawData.subset(n.replicates.get(a).map((function(t){return"LFQ intensity ".concat(t)}))),o=n.rawData.subset(n.replicates.get(e).map((function(t){return"LFQ intensity ".concat(t)}))),l=A.a.zip([].concat(Object(T.a)([a,e].map((function(t){return A.a.zip(n.replicates.get(t).map((function(t){return n.data.getSeries("LFQ intensity ".concat(t))})),(function(t){return t.toArray()}))}))),[n.data.subset(["id"])]),(function(t){var n,r=Object(x.a)(t,3),c=r[0],s=r[1],u=r[2].id,l=E()(c).mean(),p=E()(s).mean(),d=k(c,s).p,O=function(t){return Object.values(t.at(u)).reduce((function(t,e){return 0!==Number(e)&&t++,t}),0)};return n={},Object(g.a)(n,"mean ".concat(a),l),Object(g.a)(n,"mean ".concat(e),p),Object(g.a)(n,"log FC",p-l),Object(g.a)(n,"p value",d),Object(g.a)(n,"N ".concat(a),O(i)),Object(g.a)(n,"N ".concat(e),O(o)),n})).withSeries(t.COMMON_COLUMNS.reduce((function(t,e){return Object.assign(t,Object(g.a)({},e,n.data.getSeries(e)))}),{})).withIndex(n.data.getIndex()).bake().withSeries({"adjusted p value":function(t){return new A.b({index:t.getIndex(),values:L(t.getSeries("p value").toArray())})}}).bake().select((function(t){var n=Object(M.a)({},t);return n.significant=t["adjusted p value"]<=r&&Math.abs(t["log FC"])>=s&&(t["N ".concat(a)]>=u||t["N ".concat(e)]>=u)?"yes":"no",n})).bake();n.comparisons.get(a).set(e,l)};for(o.s();!(c=o.n()).done;)l()}catch(O){o.e(O)}finally{o.f()}},p=0,d=Object.entries(e);p<d.length;p++)l()}}]),t}();H.SNAPSHOT_KEYS={REMOVE_CONTAMINANTS:"REMOVE_CONTAMINANTS",LOG_TRANSFORM:"LOG_TRANSFORM",MEDIAN_NORMALIZATION:"MEDIAN_NORMALIZATION",IMPUTE_MISSING_VALUES:"IMPUTE_MISSING_VALUES"},H.COMMON_COLUMNS=["id","uniprotID","gene"],H.IMPUTATION_METHODS={METHOD_31:"METHOD_31",METHOD_46:"METHOD_46",METHOD_47:"METHOD_47"};var Q=H;N.a.setAppElement("#root");var V=Object(o.b)((function(t){return{}}),(function(t){return{onImputeClick:function(e){t(function(t){return function(e){l.onImpute(t)}}(e))}}}))((function(t){var e=t.onImputeClick,n=r.a.useState(!1),i=Object(x.a)(n,2),c=i[0],s=i[1],o=r.a.useState({normalize:!0,method:Q.IMPUTATION_METHODS.METHOD_31}),u=Object(x.a)(o,2),l=u[0],p=u[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"(3) "}),Object(a.jsx)("button",{onClick:function(){return s(!0)},children:"Preprocess and impute"}),Object(a.jsx)("ul",{children:Object(a.jsx)("li",{children:"View log-transformed intensity distributions before and after imputation as violin plot or boxplot."})}),Object(a.jsxs)(N.a,{isOpen:c,id:"input-imputation-modal",style:{overlay:{zIndex:1e3}},children:[Object(a.jsx)("h1",{id:"input-imputation-modal-head",children:"Imputation options"}),Object(a.jsxs)("div",{id:"input-imputation-modal-body",children:[Object(a.jsx)("h2",{children:"Pre-processing"}),Object(a.jsx)("input",{type:"checkbox",id:"normalizeMedians",checked:l.normalize,onChange:function(t){return p(Object.assign({},l,{normalize:t.target.checked}))}}),Object(a.jsx)("label",{htmlFor:"normalizeMedians",children:"Normalize medians"}),Object(a.jsx)("h2",{children:"Imputation"}),Object(a.jsxs)("select",{onChange:function(t){return p(Object.assign({},l,{method:t.currentTarget.value}))},children:[Object(a.jsx)("option",{value:Q.IMPUTATION_METHODS.METHOD_31,children:"method 3.1"}),Object(a.jsx)("option",{value:Q.IMPUTATION_METHODS.METHOD_46,children:"method 4.6"}),Object(a.jsx)("option",{value:Q.IMPUTATION_METHODS.METHOD_47,children:"method 4.7"})]})]}),Object(a.jsx)("div",{id:"input-replicate-modal-foot",children:Object(a.jsx)("button",{onClick:function(){e(l),s(!1)},children:"OK"})})]})]})}));n(1827);N.a.setAppElement("#root");var G=Object(o.b)((function(t){return{conditions:t.input.conditions}}),(function(t){return{onComparisonSelect:function(e,n){t(function(t,e){return function(n){l.onComparisonsSelect(t,e).then((function(){n(j(O,t))}))}}(e,n))}}}))((function(t){var e=t.conditions,n=t.onComparisonSelect,i=r.a.useState(!1),c=Object(x.a)(i,2),s=c[0],o=c[1],u=r.a.useState(.05),l=Object(x.a)(u,2),p=l[0],d=l[1],O=r.a.useState(1),b=Object(x.a)(O,2),j=b[0],f=b[1],h=r.a.useState(2),m=Object(x.a)(h,2),g=m[0],v=m[1],S=r.a.useState({}),y=Object(x.a)(S,2),I=y[0],_=y[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{children:"(4) "}),Object(a.jsx)("button",{onClick:function(){return o(!0)},children:"Select comparisons"}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:"View enriched and depleted proteins per comparison as volcano plot."}),Object(a.jsx)("li",{children:"View distribution of p values and adjusted p values."}),Object(a.jsx)("li",{children:"View mean intensities, log fold changes, p values as data table."})]}),Object(a.jsxs)(N.a,{isOpen:s,id:"input-comparison-modal",style:{overlay:{zIndex:1e3}},children:[Object(a.jsx)("h1",{id:"input-comparison-modal-head",children:"Select comparisons"}),Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),e.map((function(t){return Object(a.jsx)("td",{children:t},"".concat(t," B"))}))]}),e.map((function(t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t},"".concat(t," A")),e.map((function(e){return Object(a.jsx)("td",{children:Object(a.jsx)("input",{type:"checkbox",onChange:function(n){return function(t,e,n){var a=Object(M.a)({},I);n?(a[t]=Object(T.a)(a[t]||[]),a[t].includes(e)||a[t].push(e)):t in a&&a[t].includes(e)&&(a[t]=Object(T.a)(a[t]).splice(a[t].indexOf(e),1)),_(a)}(t,e,n.target.checked)},disabled:t===e})},"".concat(t,",").concat(e))}))]},"".concat(t," row"))}))]})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"threshold-p",children:"Significant p-value: "}),Object(a.jsx)("input",{type:"number",step:"any",min:0,value:p,onChange:function(t){return d(t.target.value)},id:"threshold-p"}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{htmlFor:"threshold-logfc",children:["Significant log fold change:"," "]}),Object(a.jsx)("input",{type:"number",step:"any",min:0,value:j,onChange:function(t){return f(t.target.value)},id:"threshold-logfc"}),Object(a.jsx)("br",{}),Object(a.jsxs)("label",{htmlFor:"threshold-reps",children:["Significant number of replicates:"," "]}),Object(a.jsx)("input",{type:"number",step:1,min:0,value:g,onChange:function(t){return v(t.target.value)},id:"threshold-reps"})]}),Object(a.jsx)("div",{id:"input-comparison-modal-foot",children:Object(a.jsx)("button",{onClick:function(){n(I,{thresholdP:p,thresholdLogFC:j,thresholdReps:g}),o(!1)},children:"OK"})})]})]})}));var z=function(t){var e=t.id;return Object(a.jsxs)("div",{id:e,className:"input-container",children:[Object(a.jsx)(m,{}),Object(a.jsx)(S,{}),Object(a.jsx)(V,{}),Object(a.jsx)(G,{})]})},K=n(60),Y=n.n(K),Z=n(122),B=n(963),X=n.n(B),J={LOG_VIOLIN:"LOG_VIOLIN",PRE_POST_IMPUTATION_VIOLIN:"PRE_POST_IMPUTATION_VIOLIN",PRE_POST_IMPUTATION_BOXPLOT:"PRE_POST_IMPUTATION_BOXPLOT",VOLCANO:"VOLCANO",P_VALUE_HISTOGRAM:"P_VALUE_HISTOGRAM"};function q(t){return W.apply(this,arguments)}function W(){return(W=Object(Z.a)(Y.a.mark((function t(e){var n,a;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.type,a={data:[],layout:{}},t.t0=n,t.next=t.t0===J.LOG_VIOLIN?5:t.t0===J.PRE_POST_IMPUTATION_VIOLIN?9:t.t0===J.PRE_POST_IMPUTATION_BOXPLOT?13:t.t0===J.VOLCANO?17:t.t0===J.P_VALUE_HISTOGRAM?21:25;break;case 5:return t.next=7,$(e);case 7:return a=t.sent,t.abrupt("break",25);case 9:return t.next=11,et(e);case 11:return a=t.sent,t.abrupt("break",25);case 13:return t.next=15,at(e);case 15:return a=t.sent,t.abrupt("break",25);case 17:return t.next=19,rt(e);case 19:return a=t.sent,t.abrupt("break",25);case 21:return t.next=23,st(e);case 23:return a=t.sent,t.abrupt("break",25);case 25:return a.layout.autosize=!0,t.abrupt("return",a);case 27:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function $(t){return tt.apply(this,arguments)}function tt(){return(tt=Object(Z.a)(Y.a.mark((function t(e){var n,a,i,r,c;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.samples,a=e.conditions,i=function(t){return Object.assign(t,{type:"violin",width:1,points:!1})},r={data:[],layout:{}},void 0==n||void 0!=a){t.next=11;break}return t.next=6,Promise.all(n.map((function(t){return l.getData("LFQ intensity ".concat(t),Q.SNAPSHOT_KEYS.LOG_TRANSFORM).then((function(e){return i({x:e,y0:t,side:"positive"})}))})));case 6:t.t0=t.sent,t.t1={},r={data:t.t0,layout:t.t1},t.next=20;break;case 11:if(void 0!=n||void 0==a){t.next=20;break}return t.next=14,l.getReplicates();case 14:return c=t.sent,t.next=17,Promise.all(a.map((function(t){return Promise.all(c.get(t).map((function(t){return l.getData("LFQ intensity ".concat(t),Q.SNAPSHOT_KEYS.MEDIAN_NORMALIZATION)}))).then((function(t){return t.flat()})).then((function(e){return i({x:e,y0:t,side:"positive"})}))})));case 17:t.t2=t.sent,t.t3={},r={data:t.t2,layout:t.t3};case 20:return Object.assign(r.layout,{title:"log2 intensities",showlegend:!1,xaxis:{title:"log2 intensity"},yaxis:{automargin:!0}}),t.abrupt("return",r);case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function et(t){return nt.apply(this,arguments)}function nt(){return(nt=Object(Z.a)(Y.a.mark((function t(e){var n,a,i,r,c;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.samples,a=e.conditions,i=function(t){return Object.assign(t,{type:"violin",width:1,points:!1})},r={data:[],layout:{}},void 0==n||void 0!=a){t.next=11;break}return t.next=6,Promise.all([].concat(Object(T.a)(n.map((function(t){return l.getData("LFQ intensity ".concat(t),Q.SNAPSHOT_KEYS.MEDIAN_NORMALIZATION).then((function(e){return i({name:"pre",x:e,y0:t,legendgroup:"pre",side:"positive",line:{color:"#1f77b4"}})}))}))),Object(T.a)(n.map((function(t){return l.getData("LFQ intensity ".concat(t),Q.SNAPSHOT_KEYS.IMPUTE_MISSING_VALUES).then((function(e){return i({name:"post",x:e,y0:t,legendgroup:"post",side:"negative",line:{color:"#ff7f0e"}})}))})))));case 6:t.t0=t.sent,t.t1={},r={data:t.t0,layout:t.t1},t.next=20;break;case 11:if(void 0!=n||void 0==a){t.next=20;break}return t.next=14,l.getReplicates();case 14:return c=t.sent,t.next=17,Promise.all([].concat(Object(T.a)(a.map((function(t){return Promise.all(c.get(t).map((function(t){return l.getData("LFQ intensity ".concat(t),Q.SNAPSHOT_KEYS.MEDIAN_NORMALIZATION)}))).then((function(t){return t.flat()})).then((function(e){return i({name:"pre",x:e,y0:t,legendgroup:"pre",side:"positive",line:{color:"#1f77b4"}})}))}))),Object(T.a)(a.map((function(t){return Promise.all(c.get(t).map((function(t){return l.getData("LFQ intensity ".concat(t),Q.SNAPSHOT_KEYS.IMPUTE_MISSING_VALUES)}))).then((function(t){return t.flat()})).then((function(e){return i({name:"post",x:e,y0:t,legendgroup:"post",side:"negative",line:{color:"#ff7f0e"}})}))})))));case 17:t.t2=t.sent,t.t3={},r={data:t.t2,layout:t.t3};case 20:return Object.assign(r.layout,{title:"log2 intensities pre- and post-imputation",xaxis:{title:"log2 intensity"},yaxis:{automargin:!0}}),t.abrupt("return",r);case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function at(t){return it.apply(this,arguments)}function it(){return(it=Object(Z.a)(Y.a.mark((function t(e){var n,a,i,r,c;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.samples,a=e.conditions,i=function(t){return Object.assign(t,{type:"box"})},r={data:[],layout:{}},void 0==n||void 0!=a){t.next=11;break}return t.next=6,Promise.all([].concat(Object(T.a)(n.map((function(t){return l.getData("LFQ intensity ".concat(t),Q.SNAPSHOT_KEYS.MEDIAN_NORMALIZATION).then((function(e){return i({name:"pre",y:e,x0:t,legendgroup:"pre",marker:{color:"#1f77b4"}})}))}))),Object(T.a)(n.map((function(t){return l.getData("LFQ intensity ".concat(t),Q.SNAPSHOT_KEYS.IMPUTE_MISSING_VALUES).then((function(e){return i({name:"post",y:e,x0:t,legendgroup:"post",marker:{color:"#ff7f0e"}})}))})))));case 6:t.t0=t.sent,t.t1={},r={data:t.t0,layout:t.t1},t.next=20;break;case 11:if(void 0!=n||void 0==a){t.next=20;break}return t.next=14,l.getReplicates();case 14:return c=t.sent,t.next=17,Promise.all([].concat(Object(T.a)(a.map((function(t){return Promise.all(c.get(t).map((function(t){return l.getData("LFQ intensity ".concat(t),Q.SNAPSHOT_KEYS.MEDIAN_NORMALIZATION)}))).then((function(t){return t.flat()})).then((function(e){return i({name:"pre",y:e,x0:t,legendgroup:"pre",marker:{color:"#1f77b4"}})}))}))),Object(T.a)(a.map((function(t){return Promise.all(c.get(t).map((function(t){return l.getData("LFQ intensity ".concat(t),Q.SNAPSHOT_KEYS.IMPUTE_MISSING_VALUES)}))).then((function(t){return t.flat()})).then((function(e){return i({name:"post",y:e,x0:t,legendgroup:"post",marker:{color:"#ff7f0e"}})}))})))));case 17:t.t2=t.sent,t.t3={},r={data:t.t2,layout:t.t3};case 20:return Object.assign(r.layout,{title:"log2 intensities pre- and post-imputation",xaxis:{automargin:!0},yaxis:{title:"log2 intensity"},boxmode:"group",boxgap:-1,boxgroupgap:0}),t.abrupt("return",r);case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function rt(t){return ct.apply(this,arguments)}function ct(){return(ct=Object(Z.a)(Y.a.mark((function t(e){var n,a,i;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.comparisons,a=e.highlightGenes,n){t.next=3;break}return t.abrupt("return",{data:[],layout:{}});case 3:return i=new Set((a||[]).map((function(t){return t.toLowerCase()}))),t.next=6,Promise.all([l.getComparisonData(n,"log FC"),l.getComparisonData(n,"adjusted p value"),l.getComparisonData(n,"gene"),l.getComparisonData(n,"significant")]).then((function(t){var e=Object(x.a)(t,4),n=e[0],a=e[1],r=e[2],c=e[3];return{type:"scattergl",mode:"markers",x:n,y:a.map((function(t){return-1*Math.log10(t)})),hovertext:r,marker:{color:0===i.size?c.map((function(t){return"yes"===t?1:0})):r.map((function(t){return i.has(t.toLowerCase())?1:0}))}}}));case 6:return t.t0=t.sent,t.t1=[t.t0],t.t2={title:"".concat(n[1]," vs. ").concat(n[0]),xaxis:{title:"log2 (".concat(n[1]," / ").concat(n[0],")")},yaxis:{title:"-log10 (p_adjusted)"}},t.abrupt("return",{data:t.t1,layout:t.t2});case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function st(t){return ot.apply(this,arguments)}function ot(){return(ot=Object(Z.a)(Y.a.mark((function t(e){var n;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.comparisons){t.next=3;break}return t.abrupt("return",{data:[],layout:{}});case 3:return t.next=5,l.getComparisonData(n,"p value");case 5:return t.t0=t.sent,t.t1={start:0,end:1,size:.025},t.t2={type:"histogram",name:"p value",x:t.t0,opacity:.5,xbins:t.t1},t.next=10,l.getComparisonData(n,"adjusted p value");case 10:return t.t3=t.sent,t.t4={start:0,end:1,size:.025},t.t5={type:"histogram",name:"adjusted p value",x:t.t3,opacity:.5,xbins:t.t4},t.t6=[t.t2,t.t5],t.t7={title:"".concat(n[1]," vs. ").concat(n[0]," p values"),barmode:"overlay",xaxis:{title:"p"},yaxis:{title:"count"}},t.abrupt("return",{data:t.t6,layout:t.t7});case 16:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var ut=Object(o.b)((function(t){return{figureOptions:t.view.figureOptions}}),null)((function(t){var e=t.id,n=t.figureOptions,i=r.a.useState({data:[],layout:{autosize:!0}}),c=Object(x.a)(i,2),s=c[0],o=c[1];return r.a.useEffect(Object(Z.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return t.t0=o,t.next=4,q(n);case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)}))),[n]),s?Object(a.jsx)("div",{id:e,className:"main-container",children:Object(a.jsx)(X.a,{className:"main-plot",data:s.data,layout:s.layout,useResizeHandler:!0,style:{width:"100%",height:"100%"},divId:"mainpanel-figure"})}):"loading..."})),lt=n(964),pt=n.n(lt);var dt=Object(o.b)((function(t){return{figureOptions:t.view.figureOptions}}),null)((function(t){var e=t.id,n=(t.samples,t.figureOptions),i=r.a.useState(),c=Object(x.a)(i,2),s=c[0],o=c[1];return r.a.useEffect(Object(Z.a)(Y.a.mark((function t(){return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.comparisons){t.next=6;break}return t.t0=o,t.next=4,l.getComparisonsTable(n.comparisons);case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)}))),[n.comparisons]),Object(a.jsx)("div",{id:e,children:Object(a.jsx)(pt.a,{title:n.comparisons?"".concat(n.comparisons[1]," vs. ").concat(n.comparisons[0]):"no data: make and select a comparison",data:s,columns:s?Object.keys(s[0]):[],options:{selectableRows:"none"}})})}));n(2070);var Ot=Object(o.b)((function(t){return{samples:t.input.samples,conditions:t.input.conditions,comparisons:t.input.comparisons}}),null)((function(t){var e,n=t.samples,i=t.conditions,c=t.comparisons,s=t.figureType,o=t.onOptionsChange,u=r.a.useState("samples"),l=Object(x.a)(u,2),p=l[0],d=l[1];switch(s){case J.LOG_VIOLIN:case J.PRE_POST_IMPUTATION_VIOLIN:case J.PRE_POST_IMPUTATION_BOXPLOT:var O=function(t){d(t.currentTarget.value),o({samples:void 0,conditions:void 0})};e=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"radio",id:"figureTypeSamples",name:"figureType",value:"samples",checked:"samples"===p,onChange:O}),Object(a.jsx)("label",{htmlFor:"figureTypeSamples",children:"Samples"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"radio",id:"figureTypeConditions",name:"figureType",value:"conditions",checked:"conditions"===p,onChange:O}),Object(a.jsx)("label",{htmlFor:"figureTypeConditions",children:"Conditions"})]}),Object(a.jsx)("select",{className:"sample-condition-selector",multiple:!0,onChange:function(t){o(Object(g.a)({},p,Array.from(t.target.selectedOptions).map((function(t){return t.value}))))},children:{samples:n,conditions:i}[p].map((function(t){return Object(a.jsx)("option",{value:t,children:t},t)}))})]});break;case J.VOLCANO:case J.P_VALUE_HISTOGRAM:e=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("select",{className:"comparison-selector",multiple:!0,onChange:function(t){o({comparisons:JSON.parse(t.target.value)})},children:Object.entries(c||{}).map((function(t){var e=Object(x.a)(t,2),n=e[0];return e[1].map((function(t){return Object(a.jsxs)("option",{value:JSON.stringify([n,t]),children:[t," vs. ",n]},JSON.stringify([n,t]))}))})).flat()}),Object(a.jsx)("textarea",{className:"highlight-genes-textbox",placeholder:"highlight genes in volcano plot (case insensitive); one gene per line",onChange:function(t){return o({highlightGenes:t.target.value.split("\n").filter((function(t){return""!==t}))})}})]})}return Object(a.jsx)("div",{className:"figure-sample-condition-selector",children:e})}));n(2071);var bt=Object(o.b)(null,(function(t){return{onOptionsSet:function(e){t(j(b,e))},onDownloadClick:function(){t((function(t){l.downloadData().then((function(t){var e=new Blob([t],{type:"application/vnd.ms-excel"}),n=document.createElement("a");n.href=window.URL.createObjectURL(e),n.download="results.xlsx",n.click()}))}))},onSavePlotClick:function(){t((function(t){h.a.downloadImage("mainpanel-figure",{format:"png",width:1024,height:1024,filename:"figure"})}))}}}))((function(t){var e=t.id,n=t.onOptionsSet,i=t.onDownloadClick,c=t.onSavePlotClick,s=r.a.useState({}),o=Object(x.a)(s,2),u=o[0],l=o[1];return Object(a.jsxs)("div",{id:e,className:"view-container",children:[Object(a.jsx)("p",{children:"Select data to view."}),Object(a.jsxs)("div",{className:"figure-options",children:[Object(a.jsx)("select",{onChange:function(t){l(Object.assign({},u,{type:t.target.value}))},defaultValue:"default",children:[Object(a.jsx)("option",{disabled:!0,value:"default",children:"-- select an option --"},"default")].concat(Object(T.a)(Object.keys(J).map((function(t){return Object(a.jsx)("option",{value:t,children:t},t)}))))}),Object(a.jsx)(Ot,{figureType:u.type,onOptionsChange:function(t){return l(Object.assign({},u,t))}}),Object(a.jsx)("button",{onClick:function(){return n(u)},children:"View data"}),Object(a.jsx)("button",{onClick:i,children:"Download data"}),Object(a.jsx)("button",{onClick:c,children:"Download figure"})]})]})}));var jt=function(){return Object(a.jsxs)("div",{id:"app-container",children:[Object(a.jsx)(z,{id:"input-container"}),Object(a.jsx)(bt,{id:"view-container"}),Object(a.jsx)(dt,{id:"sidepanel-container"}),Object(a.jsx)(ut,{id:"mainpanel-container"})]})},ft=n(172),ht=n(968),mt={input:{samples:[],conditions:[]},view:{figureOptions:{}},side:{},main:{}};function gt(t,e){switch(e.type){case p:return Object.assign({},t,{samples:e.data});case d:return Object.assign({},t,{conditions:e.data});case O:return Object.assign({},t,{comparisons:e.data})}return t}function xt(t,e){switch(e.type){case b:return Object.assign({},t,{figureOptions:e.data})}return t}var vt="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ft.c,Nt=Object(ft.d)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,e=arguments.length>1?arguments[1]:void 0,n=Object(M.a)({},t);switch(e.type){case p:case d:case O:n.input=gt(t.input,e);break;case b:n.view=xt(t.view,e)}return n}),vt(Object(ft.a)(ht.a)));s.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(o.a,{store:Nt,children:Object(a.jsx)(jt,{})})}),document.getElementById("root"))},985:function(t,e,n){},986:function(t,e,n){},987:function(t,e,n){}},[[2077,1,2]]]);
//# sourceMappingURL=main.3cf60f1b.chunk.js.map