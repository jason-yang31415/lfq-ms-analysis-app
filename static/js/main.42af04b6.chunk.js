(this["webpackJsonplfq-app"]=this["webpackJsonplfq-app"]||[]).push([[0],{115:function(t,e){},140:function(t,e,n){},143:function(t,e,n){},144:function(t,e,n){},146:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n(1),s=n.n(i),o=n(18),c=n.n(o),r=(n(80),n(81),n(82),n(8)),u=n(5),l=n(4),p=n(9),d=n(10),j=n(47),O=n(48),b=n(32),f=n(50),h=n.n(f),m=function(){function t(e,n){Object(j.a)(this,t),this.data=e,this.rawData=e,this.samples=n,this.snapshots=new Map,this.replicates=new Map,this.removeContaminants=this.removeContaminants.bind(this),this.logTransform=this.logTransform.bind(this),this.removeAllNaN=this.removeAllNaN.bind(this),this.setReplicates=this.setReplicates.bind(this)}return Object(O.a)(t,[{key:"removeContaminants",value:function(){console.log("removing contaminants"),this.data=this.data.where((function(t){return!t["Potential contaminant"]&&!t.Reverse})).subset(["id","uniprotID"].concat(Object(d.a)(this.samples.map((function(t){return"LFQ intensity ".concat(t)}))))).bake(),this.snapshots.set(t.SNAPSHOT_KEYS.REMOVE_CONTAMINANTS,this.data)}},{key:"logTransform",value:function(){console.log("log transforming");var e,n=Object(p.a)(this.samples);try{for(n.s();!(e=n.n()).done;){var a=e.value;this.data=this.data.transformSeries(Object(l.a)({},"LFQ intensity ".concat(a),(function(t){return t>0?Math.log2(t):NaN}))).bake()}}catch(i){n.e(i)}finally{n.f()}this.snapshots.set(t.SNAPSHOT_KEYS.LOG_TRANSFORM,this.data)}},{key:"removeAllNaN",value:function(){var t=this;console.log("removing all NaN"),this.data=this.data.where((function(e){return!t.samples.every((function(t){return isNaN(e["LFQ intensity ".concat(t)])}))})).bake()}},{key:"setReplicates",value:function(t){this.replicates.clear();for(var e=0,n=Object.entries(t);e<n.length;e++){var a=Object(u.a)(n[e],2),i=a[0],s=a[1];this.replicates.set(i,s)}}},{key:"imputeMissingValues",value:function(){var e=this;console.log("imputing missing values");var n,a=Object(p.a)(this.samples);try{var i=function(){var t=n.value,a=e.data.getSeries("LFQ intensity ".concat(t)).where((function(t){return!Number.isNaN(t)})).bake(),i=a.average(),s=a.std();e.data=e.data.transformSeries(Object(l.a)({},"LFQ intensity ".concat(t),(function(t){return Number.isNaN(t)?h.a.uniform(i-3*s,i-2*s)():t}))).bake()};for(a.s();!(n=a.n()).done;)i()}catch(s){a.e(s)}finally{a.f()}this.snapshots.set(t.SNAPSHOT_KEYS.IMPUTE_MISSING_VALUES,this.data)}}]),t}();m.SNAPSHOT_KEYS={REMOVE_CONTAMINANTS:"REMOVE_CONTAMINANTS",LOG_TRANSFORM:"LOG_TRANSFORM",IMPUTE_MISSING_VALUES:"IMPUTE_MISSING_VALUES"};var v=m,S=null;function g(t){S=t}var N=function(){return S},y=n(17),x=n.n(y),T=n(51);function _(){return(_=Object(T.a)(x.a.mark((function t(e){var n,a,i;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Response(e).text();case 2:n=t.sent,a=Object(b.a)(n).setIndex("id").generateSeries({uniprotID:function(t){return t["Protein IDs"].split(";")[0]}}).transformSeries({"Potential contaminant":function(t){return"+"===t},Reverse:function(t){return"+"===t}}).bake(),i=a.getColumns().where((function(t){return t.name.startsWith("LFQ intensity ")})).select((function(t){return t.name.split("LFQ intensity ")[1]})).toArray(),g(new v(a,i));case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var A="SET_INPUT_SAMPLES",I="SET_INPUT_CONDITIONS";function E(t,e){return{type:t,data:e}}n(145);function M(t){return function(e){(function(t){return _.apply(this,arguments)})(t).then((function(){var t=N();t.removeContaminants(),t.logTransform(),t.removeAllNaN(),t.imputeMissingValues(),e(E(A,t.samples))}))}}var C=Object(r.b)(null,(function(t){return{onDataUpload:function(e){t(M(e))}}}))((function(t){var e=t.onDataUpload;return Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"dataUpload",children:"Upload data: "}),Object(a.jsx)("input",{type:"file",id:"dataUpload",name:"dataUpload",onInput:function(t){return e(t.target.files[0])}})]})})),P=n(38),R=n.n(P);n(140);R.a.setAppElement("#root");var L=Object(r.b)((function(t){return{samples:t.input.samples}}),(function(t){return{onReplicatesSelect:function(e){t(function(t){return function(e){var n=N();n&&(n.setReplicates(t),e(E(I,Object.keys(t))))}}(e))}}}))((function(t){var e=t.samples,n=t.onReplicatesSelect,i=s.a.useState(!1),o=Object(u.a)(i,2),c=o[0],r=o[1],p=s.a.useState([]),d=Object(u.a)(p,2),j=d[0],O=d[1],b=s.a.useState(""),f=Object(u.a)(b,2),h=f[0],m=f[1],v=s.a.useState({}),S=Object(u.a)(v,2),g=S[0],N=S[1];return Object(a.jsxs)("div",{children:[Object(a.jsx)("button",{onClick:function(){return r(!0)},children:"Select replicates"}),Object(a.jsxs)(R.a,{isOpen:c,id:"input-replicate-modal",children:[Object(a.jsx)("h1",{id:"input-replicate-modal-head",children:"Select replicates"}),Object(a.jsx)("select",{multiple:!0,onChange:function(t){O(Array.from(t.target.selectedOptions).map((function(t){return t.value})))},children:e.map((function(t){return Object(a.jsx)("option",{value:t,children:t},t)}))}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{htmlFor:"conditionName",children:"Condition name: "}),Object(a.jsx)("input",{type:"text",id:"conditionName",name:"conditionName",value:h,onChange:function(t){return m(t.target.value)}}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:function(){0!==h.length&&(N(Object.assign({},g,Object(l.a)({},h,j))),m(""))},children:"Add condition"}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{onClick:function(){return N({})},children:"Reset conditions"})]}),Object(a.jsx)("div",{children:Object.entries(g).map((function(t){var e=Object(u.a)(t,2),n=e[0],i=e[1];return Object(a.jsxs)("p",{children:[n,": ",i.join(", ")]},n)}))}),Object(a.jsx)("div",{id:"input-replicate-modal-foot",children:Object(a.jsx)("button",{onClick:function(){n(g),r(!1)},children:"OK"})})]})]})}));var k=function(t){var e=t.id;return Object(a.jsxs)("div",{id:e,className:"input-container",children:[Object(a.jsx)(C,{}),Object(a.jsx)(L,{})]})},w=n(52),U=n.n(w),F={PRE_POST_IMPUTATION_VIOLIN:"PRE_POST_IMPUTATION_VIOLIN"};function V(t){var e={data:[],layout:{}};switch(t.type){case F.PRE_POST_IMPUTATION_VIOLIN:e=function(t){var e=t.samples,n=t.conditions,a=N(),i=function(t){return Object.assign(t,{type:"violin",width:3,points:"suspectedoutliers",jitter:.1})},s={data:[],layout:{}};void 0!=e&&void 0==n?s={data:[].concat(Object(d.a)(e.map((function(t){return i({name:"pre",x:a.snapshots.get(v.SNAPSHOT_KEYS.LOG_TRANSFORM).getSeries("LFQ intensity ".concat(t)).toArray(),y0:t,legendgroup:"pre",side:"positive",pointpos:.1})}))),Object(d.a)(e.map((function(t){return i({name:"post",x:a.snapshots.get(v.SNAPSHOT_KEYS.IMPUTE_MISSING_VALUES).getSeries("LFQ intensity ".concat(t)).toArray(),y0:t,legendgroup:"post",side:"negative",pointpos:-.1})})))),layout:{}}:void 0==e&&void 0!=n&&(s={data:[].concat(Object(d.a)(n.map((function(t){return i({name:"pre",x:a.replicates.get(t).map((function(t){return a.snapshots.get(v.SNAPSHOT_KEYS.LOG_TRANSFORM).getSeries("LFQ intensity ".concat(t)).toArray()})).flat(),y0:t,legendgroup:"pre",side:"positive",pointpos:.1})}))),Object(d.a)(n.map((function(t){return i({name:"post",x:a.replicates.get(t).map((function(t){return a.snapshots.get(v.SNAPSHOT_KEYS.IMPUTE_MISSING_VALUES).getSeries("LFQ intensity ".concat(t)).toArray()})).flat(),y0:t,legendgroup:"post",side:"negative",pointpos:-.1})})))),layout:{}});return Object.assign(s.layout,{title:"log2 intensities pre- and post-imputation",yaxis:{automargin:!0}}),s}(t)}return e.layout.autosize=!0,e}n(143);var Q=Object(r.b)((function(t){return{samples:t.input.samples,conditions:t.input.conditions}}),null)((function(t){var e=t.samples,n=t.conditions,i=t.onSampleConditionChange,o=s.a.useState("samples"),c=Object(u.a)(o,2),r=c[0],p=c[1],d=function(t){p(t.currentTarget.value),console.log(t.currentTarget.value)};return Object(a.jsxs)("div",{className:"figure-sample-condition-selector",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("input",{type:"radio",id:"figureTypeSamples",name:"figureType",value:"samples",checked:"samples"===r,onChange:d}),Object(a.jsx)("label",{htmlFor:"figureTypeSamples",children:"Samples"}),Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"radio",id:"figureTypeConditions",name:"figureType",value:"conditions",checked:"conditions"===r,onChange:d}),Object(a.jsx)("label",{htmlFor:"figureTypeConditions",children:"Conditions"})]}),Object(a.jsx)("select",{multiple:!0,onChange:function(t){i(Object(l.a)({},r,Array.from(t.target.selectedOptions).map((function(t){return t.value}))))},children:{samples:e,conditions:n}[r].map((function(t){return Object(a.jsx)("option",{value:t,children:t},t)}))})]})}));n(144);var G=Object(r.b)((function(t){return{samples:t.input.samples}}),null)((function(t){var e=t.id,n=(t.samples,s.a.useState()),i=Object(u.a)(n,2),o=i[0],c=i[1],r=s.a.useState({data:[],layout:{autosize:!0}}),l=Object(u.a)(r,2),p=l[0],j=l[1];return Object(a.jsxs)("div",{id:e,className:"main-container",children:[Object(a.jsxs)("div",{className:"main-figure-options",children:[Object(a.jsx)("select",{onChange:function(t){c(Object.assign({},o,{type:t.target.value})),console.log(t.target.value)},defaultValue:"default",children:[Object(a.jsx)("option",{disabled:!0,value:"default",children:"-- select an option --"},"default")].concat(Object(d.a)(Object.keys(F).map((function(t){return Object(a.jsx)("option",{value:t,children:t},t)}))))}),Object(a.jsx)(Q,{onSampleConditionChange:function(t){var e=t.samples,n=t.conditions;return c(Object.assign({},o,{samples:e,conditions:n}))}}),Object(a.jsx)("button",{onClick:function(){j(V(o))},children:"Show plot"})]}),Object(a.jsx)(U.a,{className:"main-plot",data:p.data,layout:p.layout,useResizeHandler:!0})]})}));var D=function(t){var e=t.id;return Object(a.jsx)("div",{id:e})};var H=function(){return Object(a.jsxs)("div",{id:"app-container",children:[Object(a.jsx)(k,{id:"input-container"}),Object(a.jsx)(D,{id:"sidepanel-container"}),Object(a.jsx)(G,{id:"mainpanel-container"})]})},K=n(53),Y=n(16),z=n(54),q={input:{samples:[],conditions:[]},side:{},main:{}};function J(t,e){switch(e.type){case A:return Object.assign({},t,{samples:e.data});case I:return Object.assign({},t,{conditions:e.data})}return t}var X="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Y.c,B=Object(Y.d)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,e=arguments.length>1?arguments[1]:void 0,n=Object(K.a)({},t);switch(e.type){case A:case I:n.input=J(t.input,e)}return n}),X(Object(Y.a)(z.a)));c.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(r.a,{store:B,children:Object(a.jsx)(H,{})})}),document.getElementById("root"))},80:function(t,e,n){},81:function(t,e,n){},82:function(t,e,n){}},[[146,1,2]]]);
//# sourceMappingURL=main.42af04b6.chunk.js.map